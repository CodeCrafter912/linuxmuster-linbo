--- cloop-2.631/compressed_loop.c	2009-09-22 16:49:56.000000000 +0200
+++ cloop-2.634/compressed_loop.c	2010-07-02 11:48:52.000000000 +0200
@@ -20,7 +20,7 @@
  */
 
 #define CLOOP_NAME "cloop"
-#define CLOOP_VERSION "2.631"
+#define CLOOP_VERSION "2.634"
 #define CLOOP_MAX 8
 
 #ifndef KBUILD_MODNAME
@@ -436,9 +436,9 @@
  if(isblkdev)
   {
    struct request_queue *q = bdev_get_queue(inode->i_bdev);
-   blk_queue_max_sectors(clo->clo_queue, queue_max_sectors(q));
-   blk_queue_max_phys_segments(clo->clo_queue, queue_max_phys_segments(q));
-   blk_queue_max_hw_segments(clo->clo_queue, queue_max_hw_segments(q));
+   blk_queue_max_hw_sectors(clo->clo_queue, queue_max_hw_sectors(q)); /* Renamed in 2.6.34 */
+   blk_queue_max_segments(clo->clo_queue, queue_max_segments(q)); /* Renamed in 2.6.34 */
+   /* blk_queue_max_hw_segments(clo->clo_queue, queue_max_hw_segments(q)); */ /* Removed in 2.6.34 */
    blk_queue_max_segment_size(clo->clo_queue, queue_max_segment_size(q));
    blk_queue_segment_boundary(clo->clo_queue, queue_segment_boundary(q));
    blk_queue_merge_bvec(clo->clo_queue, q->merge_bvec_fn);
